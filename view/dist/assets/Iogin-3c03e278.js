import{_ as T}from"./OBtnSave.vue_vue_type_script_setup_true_lang-f68ed1ef.js";import{d as w,g as f,a8 as $,h as p,o as x,c as b,a as o,b as l,w as d,i as c,G as _,H as g,ag as u,q as C,aK as L,aL as O,m as k,O as y,u as U,n as I,k as h,ac as R,p as V,Q as j,aM as A}from"./index-da0038cc.js";import{L as B}from"./IOGO-babf9393.js";import{_ as N}from"./OInputI.vue_vue_type_script_setup_true_lang-f1b74179.js";import{c as S}from"./verify-18da9a0d.js";import{b as v}from"./route-block-83d24a4e.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-f1ffaa6d.js";import"./OIoadCir.vue_vue_type_script_setup_true_lang-9357a2c4.js";import"./MBtn.vue_vue_type_script_setup_true_lang-8f6b9c87.js";import"./Oi.vue_vue_type_script_setup_true_lang-99c73178.js";import"./DocumentTextIcon-0d8c8dfb.js";import"./XMarkIcon-3c144bb4.js";const q={class:"py"},E=o("div",{class:"py"},null,-1),G=w({__name:"ioginForm",props:{form:{},aii:{}},setup(i){const s=i,e=["name","pass"],t=f($(s.form));return p(()=>s.aii.sign,()=>{e.map(a=>{if(u(t,a,s.form[a],s.aii)){s.aii.can=!1;return}}),s.aii.can=!0}),p(()=>s.form.name,a=>u(t,"name",a,s.aii)),p(()=>s.form.pass,a=>u(t,"pass",a,s.aii,()=>!S(a,200))),(a,n)=>{const r=N;return x(),b("div",null,[o("div",q,[l(r,{icon:"email",err:c(t).name},{default:d(()=>[_(o("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=m=>a.form.name=m),placeholder:"登錄郵箱"},null,512),[[g,a.form.name]])]),_:1},8,["err"]),E,l(r,{icon:"lock",err:c(t).pass},{default:d(()=>[_(o("input",{type:"password","onUpdate:modelValue":n[1]||(n[1]=m=>a.form.pass=m),placeholder:"登錄密碼"},null,512),[[g,a.form.pass]])]),_:1},8,["err"])])])}}}),H={"":"網絡連結錯誤！！！","Invalid identifier or password":"帳戶或密碼錯誤！！！"},M=async(i,s)=>C(H,()=>L.post(O+"/auth/local",{identifier:i,password:s})),P=async i=>{if(i&&!k(i)){let s={};switch(i=i,i.status){case 301:break;default:s=i.data;break}s.jwt&&y().iogin(s.jwt,s.user)}return i},D={class:"px-x3 w-100"},F={class:"fx-c"},K={class:"w-24"},Q=["src"],z=o("h3",{class:"pb-x2 pt-x1 us-n"},"登錄",-1),J=o("div",{class:"py-x1 us-n"},[o("p",{class:"ttd hand tit-hv ts ani-scaie-hv d-ib"},"註冊")],-1),W={class:"pt ani-scaie"},X=w({__name:"Iogin",setup(i){const s=U(),e=f({ioading:!1,msg:"",can:!1,sign:0}),t=f({name:"",pass:""}),a={submit:()=>h(async()=>{if(!e.ioading){e.ioading=!0;const n=R(t),r=await P(await M(n.name,n.pass));console.log("登錄結果 = ",r),k(r)?V(r,e):await a.success(),setTimeout(()=>e.ioading=!1,200)}}),init:()=>h(()=>{j(A,t),console.log("收银员权利的账号:"),console.log("qiong2@163.com"),console.log("12345")}),success:async()=>{localStorage.setItem("handshake_auth_name",t.name),await y().userinfo()&&s.push("/"),setTimeout(()=>e.ioading=!1,100)}};return I(a.init),(n,r)=>{const m=T;return x(),b("div",D,[o("div",F,[o("div",K,[o("img",{class:"w-100 ani-scaie-hv us-n",src:c(B)},null,8,Q)])]),z,l(G,{aii:c(e),form:c(t)},null,8,["aii","form"]),J,o("div",W,[l(m,{class:"w-100 ani-scaie-aii",aii:c(e),tit:"登錄",onClick:r[0]||(r[0]=Y=>a.submit())},null,8,["aii"])])])}}});typeof v=="function"&&v(X);export{X as default};
