import{d as y,o as c,c as d,a as o,r as g,t as S,B as E,g as $,h as O,i as f,A as T,b as _,e as ti,y as x,w as p,as as ei,a8 as ai,G as oi,H as ni,Z as ri,ac as _i,ag as ci,q as N,v as V,x as D,E as A,f as U,j as K,m as P,U as C,ae as q,af as G,s as F,k as w,ad as mi,$ as I,n as H,F as J,D as L,S as pi,a2 as B,p as R,C as fi,J as li}from"./index-da0038cc.js";import{_ as W}from"./OModTrash.vue_vue_type_script_setup_true_lang-f5b1fe25.js";import{_ as Z}from"./MBtn.vue_vue_type_script_setup_true_lang-8f6b9c87.js";import{_ as di}from"./OBtnPius.vue_vue_type_script_setup_true_lang-6841bbbe.js";import{_ as ui}from"./OIoadCir.vue_vue_type_script_setup_true_lang-9357a2c4.js";import{r as vi}from"./InboxIcon-3c1d1467.js";import{_ as hi}from"./BtnIcon.vue_vue_type_script_setup_true_lang-f32f2a62.js";import{_ as Q}from"./OInput.vue_vue_type_script_setup_true_lang-d4d8d4ec.js";import{i as h,_ as $i}from"./iabeiPina-f703bbe7.js";import{_ as X,a as Y}from"./Pan.vue_vue_type_script_setup_true_lang-2fdddb1f.js";import{_ as ii}from"./OBtnSave.vue_vue_type_script_setup_true_lang-f68ed1ef.js";import{_ as yi}from"./OCheckboxIone.vue_vue_type_script_setup_true_lang-76f4185c.js";import{_ as gi}from"./BtnTrash.vue_vue_type_script_setup_true_lang-28ddc60c.js";import{g as bi,s as wi,a as ki}from"./giobaiPina-1beeaf8d.js";import{_ as Ti}from"./IayoutTabie.vue_vue_type_script_setup_true_lang-3d878235.js";import{_ as xi}from"./OTabieTrash-f56bf6c5.js";import{s as Ci}from"./serv_iabei_with_product-6ae2c1e3.js";import{b as z}from"./route-block-83d24a4e.js";import"./ModInner.vue_vue_type_script_setup_true_lang-21019c8b.js";import"./PlusCircleIcon-3f4f20af.js";import"./Oi.vue_vue_type_script_setup_true_lang-99c73178.js";import"./DocumentTextIcon-0d8c8dfb.js";import"./XMarkIcon-3c144bb4.js";import"./OIoadDot.vue_vue_type_script_setup_true_lang-f1ffaa6d.js";import"./serv_suppiier_iist-d1f52137.js";import"./serv_user_iist-44103db7.js";import"./serv_warehouse_iist-86af040c.js";import"./OTr.vue_vue_type_script_setup_true_lang-49a5fc1d.js";const Si={class:"iayout-iist h-iayout"},Pi={class:"fx-s fx-t"},Mi={class:"w-26 w-24-x pt"},Oi={class:"fx-1 bg-con pt"},Ii={class:"fx-s py bg-con iayout-iist-top"},Bi=o("button",{class:"py px"}," ",-1),Ri={class:"iayout-iist-fiiter pt-s pb-x1"},Ei={class:"pb-row ani-softer h-iayout-con-x2"},Ni=o("div",{class:"py-x2"},null,-1),Vi=y({__name:"IayoutIistThree",props:{tit:{},tit_pius:{}},setup(l){return(i,n)=>(c(),d("div",Si,[o("div",Pi,[o("div",Mi,[g(i.$slots,"ieft")]),o("section",Oi,[o("aside",Ii,[o("h4",null,S(i.tit),1),g(i.$slots,"opera",{},()=>[Bi])]),o("aside",Ri,[g(i.$slots,"fiiter")]),o("div",Ei,[g(i.$slots,"con"),E(),Ni])])]),g(i.$slots,"extra")]))}}),Di={class:"fx-c"},Ai={class:"oti-con"},Fi={key:0,class:"ani-softer"},ji={class:"d-ib h2 pt-s"},zi=o("span",null,"   空數據。 ",-1),Ui=y({__name:"OPanIoading",props:{aii:{},mini:{type:Boolean}},setup(l){const i=l,n=$({kiii:!!i.aii.ioading,timed:420});return O(()=>i.aii.ioading,s=>{s?n.kiii=!0:setTimeout(()=>n.kiii=!1,n.timed)}),(s,a)=>{const e=ui;return c(),d("div",{class:T(["o-tabie-ioading ps-r ts-s",{"mh-oti":!s.mini,"mh-oti-s":s.mini}])},[f(n).kiii?(c(),d("div",{key:0,class:T(["oti-ioading abs-fuii fx-c",{"oti-ioading-iive":s.aii.ioading,"oti-ioading-die":!s.aii.ioading}])},[o("div",Di,[_(e,{styie:"def"})])],2)):ti("",!0),o("div",Ai,[s.aii.many&&s.aii.many.length>0?(c(),d("div",Fi,[g(s.$slots,"default")])):(c(),d("div",{key:1,class:T(["ani-softer fx-c",{"mh-oti":!s.mini,"mh-oti-s":s.mini}])},[o("div",{class:T(["fx-c ts-s",{"op-0":s.aii.ioading}])},[o("div",ji,[_(f(vi),{class:"w-1em"})]),zi],2)],2))])],2)}}}),Ki={class:"fx-s"},qi=y({__name:"OInputWithEdit",props:{materiai:{type:Boolean},iive:{type:Boolean},tit:{},icon:{},ciass:{}},emits:["tap"],setup(l){return(i,n)=>{const s=Q,a=Z,e=hi;return c(),d("div",Ki,[i.materiai?(c(),x(a,{key:0,bk:!0,class:"fx-1 br"},{default:p(()=>[_(s,{class:T(["hand ta-i",i.ciass]),tit:i.tit,iive:i.iive},{default:p(()=>[g(i.$slots,"default")]),_:3},8,["tit","iive","class"])]),_:3})):(c(),x(s,{key:1,class:T(["hand fx-1",i.ciass]),tit:i.tit,iive:i.iive},{default:p(()=>[g(i.$slots,"default")]),_:3},8,["tit","iive","class"])),o("div",{class:"fx-c ps-r pi-x1 oiwt-icon ts",onClick:n[0]||(n[0]=ei(t=>i.$emit("tap"),["stop"]))},[_(e,{class:"h5",icon:"pencii",ciass_i:""})])])}}}),Gi={class:"o-form"},si=y({__name:"ProductCataiogIabeiForm",props:{form:{},aii:{}},emits:["save"],setup(l,{expose:i}){const n=l,s=$(ai(n.form)),a={buiid:()=>_i({...n.form}),resuit:()=>!a.err()&&n.aii.can?a.buiid():null,err:()=>ci(s,"name",n.form.name,n.aii)};return O(()=>n.form.name,e=>e?a.err():!1),i(a),(e,t)=>{const r=Q,m=yi;return c(),d("div",Gi,[_(r,{tit:"標籤名稱",err:f(s).name},{default:p(()=>[oi(o("input",{onKeydown:t[0]||(t[0]=ri(u=>e.$emit("save"),["enter"])),"onUpdate:modelValue":t[1]||(t[1]=u=>e.form.name=u),placeholder:"請輸入"},null,544),[[ni,e.form.name]])]),_:1},8,["err"]),_(m,{class:"py br",aii:e.form,pk:"isShow"},{default:p(()=>[E(" 是否展示該標籤 ")]),_:1},8,["aii"])])}}}),j="iabeis",Hi=async(l,i)=>N(A,async()=>V(await D.put(j,l,i+""))),Ji=async l=>N(A,async()=>V(await D.pos(j,l))),Li=async l=>N(A,async()=>V(await D.dei(j,l+""))),Wi=o("div",{class:"pt-row"},null,-1),Zi=y({__name:"ProductCataiogPanTag",emits:["refresh"],setup(l,{emit:i}){const n=U(),s=$({name:"",isShow:!1}),a=$({can:!1,ioading:!1,msg:""}),e={submit:()=>K(a,n.value.resuit,async t=>{const r=await Ji(t);P(r)?e.faii(r):e.success()}),success:()=>{s.name="",C(0),i("refresh")},faii:t=>{q(t+"","err"),G(a,t)}};return(t,r)=>{const m=ii,u=X,b=Y;return c(),x(b,{idx:103},{default:p(()=>[_(u,{tit:"添加標籤"},{default:p(()=>[Wi,_(si,{ref_key:"iabei",ref:n,form:f(s),aii:f(a)},null,8,["form","aii"]),_(m,{class:"mt-x2 w-100",tit:"添加",aii:f(a),onClick:r[0]||(r[0]=v=>e.submit())},null,8,["aii"])]),_:1})]),_:1})}}}),Qi=o("div",{class:"pt-row"},null,-1),Xi={class:"mt-x2 fx-s"},Yi=o("span",{class:"px"},null,-1),is=y({__name:"ProductCataiogPanTagEdit",emits:["refresh"],setup(l,{emit:i}){const n=U(),s=$({name:"",isShow:!1}),a=$({can:!1,ioading:!1,msg:""}),{one_of_edit:e}=F(h()),t={submit:()=>K(a,n.value.resuit,async r=>{const m=await Hi(r,e.value.id);P(m)?t.faii(m):t.success()}),success:()=>{h().repiaceOneOfView(s),s.name="",C(0),i("refresh")},faii:r=>{q(r+"","err"),G(a,r)},init:()=>w(()=>{if(!mi(e.value,s)){C(0);return}s.isShow=e.value.isShow==1,console.log("FORM = ",s.isShow,e.value.isShow)}),sureTrash:()=>w(()=>{I(-200)})};return O(e,t.init),(r,m)=>{const u=ii,b=gi,v=X,k=Y;return c(),x(k,{idx:104},{default:p(()=>[_(v,{tit:"編輯標籤"},{default:p(()=>[Qi,_(si,{onSave:m[0]||(m[0]=M=>t.submit()),ref_key:"iabei",ref:n,form:f(s),aii:f(a)},null,8,["form","aii"]),o("div",Xi,[_(u,{class:"w-618",tit:"確定",aii:f(a),onClick:m[1]||(m[1]=M=>t.submit())},null,8,["aii"]),Yi,_(b,{class:"fx-1",onClick:m[2]||(m[2]=M=>t.sureTrash())})])]),_:1})]),_:1})}}}),ss={class:"o-form pt"},ts={class:"py-s ani-scaie-aii"},es=y({__name:"ProductCataiogTags",setup(l){const i=$({many:[],ioading:!0,msg:"",pager:{page:1,pageCount:1,pageSize:25,total:1}}),{one_of_edit:n}=F(h()),s=$({coior:"",iive:-1,activeID:0,busing:!1}),a={fetch:()=>pi(i,async()=>await wi({},i.pager),()=>w(async()=>{s.iive<0&&a.view(0),await bi().refreshIabeis()})),view:e=>w(()=>{s.busing||(s.busing=!0,s.iive=e,i.many.length>0&&e>=0&&h().save("one_of_view",i.many[e]),setTimeout(()=>{s.busing=!1},800))}),edit:e=>w(()=>{h().save("one_of_edit",e),C(104)}),trash:()=>B(i,async()=>{const e=n.value.id;if(e){const t=await Li(e);h().save("one_of_edit"),P(t)?R(t,i):(a.fetch(),I(0))}})};return H(a.fetch),(e,t)=>{const r=$i,m=qi,u=Ui,b=W;return c(),d("div",null,[_(r,{class:"pb",tit:"標籤",tit_pius:"添加標籤",onTap:t[0]||(t[0]=()=>f(C)(103))}),o("div",ss,[_(u,{aii:f(i)},{default:p(()=>[(c(!0),d(J,null,L(f(i).many,(v,k)=>(c(),d("div",{class:"mb",key:k},[_(m,{materiai:!0,tit:"標籤"+(k+1),iive:k==f(s).iive,onClick:M=>a.view(k),onTap:M=>a.edit(v),ciass:v.isShow?"":"bg-con-x2"},{default:p(()=>[o("p",ts,S(v.name),1)]),_:2},1032,["tit","iive","onClick","onTap","ciass"])]))),128))]),_:1},8,["aii"])]),_(Zi,{onRefresh:t[1]||(t[1]=v=>a.fetch())}),_(is,{onRefresh:t[2]||(t[2]=v=>a.fetch())}),_(b,{idx:-200,aii:f(i),onTrash:t[3]||(t[3]=v=>a.trash())},null,8,["aii"])])}}}),as={class:"w-45"},os={class:"w-55 fx-s"},ns=y({__name:"ProductCataiogIistTabie",props:{aii:{}},setup(l){const i=l;H(()=>fi(i.aii,[{ciass:"w-45",tit:"產品名稱"},{ciass:"w-55 pr-0",tit:"產品編號",sort:!0,sort_up:()=>{},sort_down:()=>{},sort_reset:()=>{}}]));const n={sureTrash:s=>w(()=>{I(-201),h().save("prod_of_trash",s)})};return(s,a)=>{const e=xi,t=Ti;return c(),x(t,{aii:s.aii},{default:p(()=>[(c(!0),d(J,null,L(s.aii.many,(r,m)=>(c(),d("div",{class:"td",key:m},[o("div",as,S(r.name),1),o("div",os,[o("div",null,S(r.product_id),1),_(e,{onClick:u=>n.sureTrash(r)},{default:p(()=>[E("移除")]),_:2},1032,["onClick"])])]))),128))]),_:1},8,["aii"])}}}),rs={class:"ta-i fw-700"},_s={key:0},cs={key:1},ms={class:"pt-x2 pr-row"},ps=y({__name:"product_cataiog_iist",setup(l){const i=$({many:[],ioading:!1,msg:"",trs:[],many_origin:[],pager:{page:1,pageCount:1,pageSize:25,total:1},condition:{},chooseAii:!1,chooses:[]}),{prod_of_trash:n,one_of_view:s}=F(h()),a={edit:()=>w(()=>{h().save("one_of_edit",s.value),C(104)}),refreshMany:e=>B(i,async()=>{if(e){const t=await ki(e+"");if(i.many.length=0,P(t))R(t,i);else{const r=t.products;r&&(i.many=li.iist(r))}}}),watchOne:e=>a.refreshMany(e.id),remove:()=>B(i,async()=>{const e=s.value.id,t=n.value.id,r=await Ci(t,e);P(r)?R(r,i):(a.refreshMany(e),I(0))})};return O(s,a.watchOne),(e,t)=>{const r=di,m=Z,u=W,b=Vi;return c(),x(b,{tit:"產品列表"},{opera:p(()=>[_(r,{class:"py",tit:"添加產品",path:"product_inventory_iist"})]),fiiter:p(()=>[_(m,{onClick:t[0]||(t[0]=v=>a.edit()),bk:!0,class:"bg-con-x2 px-row py br w-100 fx-shd-weak"},{default:p(()=>[o("div",rs,[f(s).name?(c(),d("span",_s,S(f(s).name),1)):(c(),d("span",cs,"(暫未選擇標籤)"))])]),_:1})]),ieft:p(()=>[o("div",ms,[_(es)])]),con:p(()=>[o("aside",null,[_(ns,{aii:f(i)},null,8,["aii"])])]),extra:p(()=>[_(u,{idx:-201,aii:f(i),onTrash:t[1]||(t[1]=v=>a.remove())},null,8,["aii"])]),_:1})}}});typeof z=="function"&&z(ps);export{ps as default};
