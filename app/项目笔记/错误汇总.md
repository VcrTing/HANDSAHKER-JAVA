## 错误汇总
作者: vcrting@163.com  
笔记时间: 2023-11-08  


### 第一阶段错误集  

#### request param 参数错误，
    问题详情: 如果使用 sort[0]=id 或 page[size]=10 就会出错，request 参数序列化异常

    解决办法: 改为 sort=id 或 pageSize=10

#### Jackson 序列化错误
    问题详情: jackson objectmapper 似乎没法序列化 security 的 UserDetails 类。
            有可能还没办法 序列 多层 的 实体类 对象。

    解决办法: 不要 将 string 转为 UserDetails 类，用自己的 User 类代替。

#### Jackson 序列化时间
    问题详情: jackson 没法 序列化 2023-10-10 10:10 为 java Date 对象

    解决办法: 装载 Date 的参数 转为 String 类型
            或者使用 hutool 工具类

#### 全局异常处理里 RunTimeException 范围过大
    问题详情: RunTimeException 范围过大，很多框架的 异常 都继承 了 这个 异常，
            你捕捉这个异常就是，将很多很多杂类异常全捕获了，
            甚至是 security 框架 里的 认证 异常都捕获了。

    解决办法: 建一个 自己的 异常 类 如 QLogicException 继承 RunTimeException
            自己的 代码要 生成异常 就 new QLogicException()。

#### Axios 跨域问题
    问题详情: 你就算 配置了 MVC 允许 跨域 以及 security 允许 跨域，
            依然存在跨域 403 forbidden 问题，    
            那是因为 浏览器 在 发送你的请求之前，会发送 一个 OPTIONS 请求，
            OPTIONS 请求通过了，才会发送你的 POST/PATCH 请求。

    解决办法: MVC 配置里面 ，除了允许 POST 等方法，
            还要允许 OPTIONS 方法。

#### Mybatis Plus 根据 ID 搜寻 会出异常
    问题详情: mybatis plus 的 selectById 方法，
            如果数据库里的表，没有 id 主键，你又执行了这个方法，
            它不会报错，只会执行不下去下面的代码，你看不出什么错。

    解决办法: 设计表的时候，尽量加 id 做主键，每张表都要有，
            
#### Spring 循环引用
    问题详情: spring 不允许 循环 @Autowrite，
            在你设计 security 的东西的 时候这个问题出现过，

    解决办法: 尽量别为了省时间 而  搞得 循环引用

#### Security 的 异常捕捉 与 自己的 全局异常处理 起冲突
    问题详情: security 自己有一套 异常 handler, 而你自己会写 全局异常 处理，
            你自己的 全局异常 处理权限太大了，会覆盖 security 的 异常 handler,
            因为你抛出的是 RunTimeException 或者 RunTimeException 的子类。        

    解决办法: 用到 security 东西的地方，
            别使用 RunTimeException 或者 RunTimeException 的子类，
            要用 security 提供的 异常类。
            